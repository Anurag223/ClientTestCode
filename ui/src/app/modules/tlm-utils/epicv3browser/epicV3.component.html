<!-- Schlumberger Private
Copyright 2018 Schlumberger.  All rights reserved in Schlumberger
authored and generated code (including the selection and arrangement of
the source code base regardless of the authorship of individual files),
but not including any copyright interest(s) owned by a third party
related to source code or object code authored or generated by
non-Schlumberger personnel.

This source code includes Schlumberger confidential and/or proprietary
information and may include Schlumberger trade secrets. Any use,
disclosure and/or reproduction is prohibited unless authorized in
writing. -->
<div id="epicMainContainer" contexthelp="epic-general">
    <div class="col-md-12 spacer"></div>
    <div *ngIf="showEpic" class="jqx-chart-tooltip-text">
        {{ loadingLabel }}
        <div class="row">
            <div class="col-md-2"><button *ngIf="epicGroups && epicGroups.length > 0" class="fmp-button fmp-button-primary tlm-utils-button1 toogleexport"
                (click)="toggleView()">
            {{ toggleLabel }}
        </button></div>
            <div class="col-md-4"></div>
            <div class="col-md-4"></div>
            <div class="col-md-2"><button *ngIf="epicGroups && epicGroups.length > 0 && !isTreeView"class="fmp-button fmp-button-primary export-button toogleexport"
                (click)="exportAsXLSX()">
            Export Grid Data
        </button></div>
        </div>   
    </div>
    <div *ngIf="displayEpicDropDowns && epicGroups && epicGroups.length > 0" class="scheduler-toolbar" >
        <div class="col-5 text-nowrap">
            <select class="site-dropdown"
                    name="groups"
                    id="group_dropdown"
                    (change)="onGroupChange($event)">
                <option value="" disabled selected>Please select a group...</option>
                <option *ngFor="let group of groups; let i = index" [value]="i">
                    {{ group }}
                </option>
            </select>
            <label>
                PL: <select class="site-dropdown">
                    <option *ngFor="let productLine of productLines; let i = index" [value]="i">
                        {{ productLine }}
                    </option>
                </select>
            </label>
            <label>
                Sub PL: <select class="site-dropdown">
                    <option *ngFor="let subProductLine of subProductLines; let i = index" [value]="i">
                        {{ subProductLine }}
                    </option>
                </select>

            </label>
            <label>
                Product Fam: <select class="site-dropdown">
                    <option *ngFor="let productFamily of productFamilies; let i = index" [value]="i">
                        {{ productFamily }}
                    </option>
                </select>
            </label>
            <label>
                Tech PL: <select class="site-dropdown">
                    <option *ngFor="let techProductLine of techProductLines; let i = index" [value]="i">
                        {{ techProductLine }}
                    </option>
                </select>
            </label>
            <label>
                Brand: <select class="site-dropdown">
                    <option *ngFor="let brand of brands; let i = index" [value]="i">
                        {{ brand }}
                    </option>
                </select>
            </label>
            <label>
                Equip Sys: <select class="site-dropdown">
                    <option *ngFor="let equipSystem of equipSystems; let i = index" [value]="i">
                        {{ equipSystem }}
                    </option>
                </select>
            </label>
            <label>
                Attribute: <select class="site-dropdown">
                    <option *ngFor="let attribute of gridAttributes; let i = index" [value]="i">
                        {{ attribute.code }} : {{ attribute.value }}
                    </option>
                </select>
            </label>
        </div>
    </div>
    <div style="max-height:500px; overflow-y: scroll;" class="gridContainer" (window:resize)="onResize()" *ngIf="viewEpicComponentFlag && isTreeView">
        <kendo-treeview kendoTreeViewExpandable
                        [nodes]="treeData"
                        textField="name"
                        [children]="fetchChildren"
                        [hasChildren]="hasChildren"
                        [expandedKeys]="expandedKeys"
                        kendoTreeViewSelectable
                        [selectBy]="'code'"
                        [(selectedKeys)]="selectedKeys"
                        [isSelected]="isItemSelected"
                        (selectionChange)="handleSingleSelectionFromTree($event)">
        </kendo-treeview>
    </div>
    <div class="gridContainer" (window:resize)="onResize()" *ngIf="viewEpicComponentFlag && !isTreeView">


        <kendo-grid #epicgrid
                    [data]="gridData"
                    [pageable]="gridModel.isPagingEnabled"
                    [height]="[gridModel.gridHeight]"
                    (dataStateChange)="dataStateChange($event)"
                    (pageChange)="pageChange($event)"
                    [resizable]="gridModel.isColumnResizingEnabled"
                    [pageSize]="gridModel.take"
                    [skip]="gridModel.skip"
                    [group]="gridModel.GroupSettings"
                    [groupable]="gridModel.isGroupingEnabled"
                    [filter]="gridModel.FilterSettings"
                    [filterable]="gridModel.isFilteringEnabled"
                    [reorderable]="gridModel.isColumnReOrderEnabled"
                    [sortable]="gridModel.sorting"
                    [sort]="gridModel.SortSettings"
                    [selectable]="true"
                    [isSelected]="isItemSelected"
                    (selectionChange)="handleMultiSelectionFromGrid($event)"
                    [(selectedKeys)]="selectedKeys">

            <ng-template kendoPagerTemplate>
                <kendo-pager-prev-buttons></kendo-pager-prev-buttons>
                <kendo-pager-numeric-buttons [buttonCount]="btnCount"></kendo-pager-numeric-buttons>
                <kendo-pager-input></kendo-pager-input>
                <kendo-pager-next-buttons></kendo-pager-next-buttons>
                <kendo-pager-page-sizes [pageSizes]="gridModel.pager.pageSizeOptions"></kendo-pager-page-sizes>
                <kendo-pager-info></kendo-pager-info>
            </ng-template>
            <kendo-grid-column field="type"
                               title="Type"
                               width="120px">
            </kendo-grid-column>
            <kendo-grid-column field="id"
                               title="ID"
                               width="120px">
            </kendo-grid-column>
            <!-- In Epic v3 hierrarchy, groups are actually Divisions-->
            <kendo-grid-column field="division"
                               title="Division"
                               width="120px">
            </kendo-grid-column>
            <!-- In Epic v3 hierrarchy, productLine is actually Business Line-->
            <kendo-grid-column field="businessLine"
                               title="Business Line"
                               width="120px">
            </kendo-grid-column>
              <!-- In Epic v3 hierrarchy, subProductLine is actually Sub Business Line-->
            <kendo-grid-column field="subBusinessLine"
                               title="Sub Business Line"
                               width="120px">
            </kendo-grid-column>
            <kendo-grid-column field="productFamily"
                               title="Product Family"
                               width="120px">
            </kendo-grid-column>
            <kendo-grid-column field="technology"
                               title="Technology"
                               width="120px">
            </kendo-grid-column>
            <kendo-grid-column field="brand"
                               title="Brand"
                               width="120px">
            </kendo-grid-column>
            <kendo-grid-column field="equipmentSystem"
                               title="Equip. Sys."
                               width="120px">
            </kendo-grid-column>
         <kendo-grid-column field="toolNameAttribute"
                    title="Tool Name"
                    width="120px">
            </kendo-grid-column> 
          
        </kendo-grid>
    </div>
</div>


