<!-- Schlumberger Private
Copyright 2018 Schlumberger.  All rights reserved in Schlumberger
authored and generated code (including the selection and arrangement of
the source code base regardless of the authorship of individual files),
but not including any copyright interest(s) owned by a third party
related to source code or object code authored or generated by
non-Schlumberger personnel.

This source code includes Schlumberger confidential and/or proprietary
information and may include Schlumberger trade secrets. Any use,
disclosure and/or reproduction is prohibited unless authorized in
writing. -->
<div class="columnOptionsDiv">
  <div
    id="myColumnOptions"
    [attr.contexthelp]="
      viewModel && viewModel.showColumnOptions ? 'column-options-panel' : null
    "
  >
    <div
      id="myColumnOptionContent"
      *ngIf="
        viewModel && viewModel.showColumnOptions && viewModel.columnOptionsBound
      "
    >
      <div id="headerContent" class="fixed-top" style="position: inherit;">
        <div class="row">
          <div class="col-sm-10">
            <span class="panel-header-name">{{ viewModel.panelHeader }}</span>
          </div>
          <div class="col-sm-2">
            <span
              class="dls-icon dls-iconClose"
              style="font-size:14px;"
              (click)="closeColumnOptions()"
            ></span>
          </div>
        </div>
        <div class="row" style="margin-top:-2px;">
          <div class="col-sm-12">
            <span class="panel-header-label">{{
              'SHARED.COLUMNOPTIONS.OPTIONHEADER' | translate
            }}</span>
          </div>
        </div>
        <div class="row" style="margin-top:10px;">
          <div
            class="col-sm-12"
            style="color:#99A6B5;width: 208px;height: 11px;"
          >
            <span
              (click)="layoutDropdown.toggle(true)"
              style="font-size: 10px;"
              >{{ 'SHARED.COLUMNOPTIONS.SAVEDLAYOUTS' | translate }}</span
            >
          </div>
        </div>
        <div class="row" id="selectedLayoutDiv" style="margin-top:8px;">
          <div class="col-sm-10">
            <kendo-dropdownlist
              #layoutDropdown
              id="layoutDropdown"
              [data]="viewModel.LayoutsInContext"
              [itemDisabled]="itemDisabled"
              [textField]="'layoutName'"
              [valueField]="'layoutID'"
              [(ngModel)]="viewModel.selectedLayout"
              (ngModelChange)="onLayoutChange($event)"
              style="width:175px;height: 24px;"
            >
              <ng-template kendoDropDownListItemTemplate let-dataItem>
                <div
                  *ngIf="dataItem.isSeperator"
                  class="column-options-seperator"
                ></div>
                <div
                  *ngIf="!dataItem.isDefault && !dataItem.isSeperator"
                  style="display:block;width:100%; overflow: hidden;"
                >
                  <hr
                    *ngIf="dataItem.isSeperator == true"
                    style="border-top: 1px solid #C7D0D8;margin:0px 0px 8px 0px;background:white !important;"
                  />
                  <div class="row">
                    <div class="col-sm-10">
                      <div
                        class="dropdownList"
                        [attr.title]="dataItem.layoutName"
                        style="text-overflow: ellipsis; width: 110px; overflow: hidden;"
                      >
                        {{ dataItem.layoutName }}
                      </div>
                    </div>
                    <div class="col-sm-2 fmp-no-padding">
                      <span
                        class=" dls-icon dls-iconClose layout-delete"
                        *ngIf="
                          viewModel.user.ldapAlias.toUpperCase() ===
                          dataItem.userID.toUpperCase()
                        "
                        (click)="onLayoutDelete($event, dataItem)"
                      ></span>
                      <span
                        *ngIf="
                          viewModel.user.ldapAlias.toUpperCase() !==
                          dataItem.userID.toUpperCase()
                        "
                        class="dls-icon dls-iconStarSolid layout-favorite"
                      ></span>
                    </div>
                  </div>
                </div>
                <div
                  *ngIf="dataItem.isDefault && !dataItem.isSeperator"
                  style="display:block;width:100%;"
                  class="dropdownList"
                >
                  <div
                    [attr.title]="dataItem.layoutName"
                    style="text-overflow: ellipsis; width: 110px; overflow: hidden;"
                  >
                    {{ dataItem.layoutName }}
                  </div>
                </div>
              </ng-template>
            </kendo-dropdownlist>
          </div>
          <div class="col-sm-2" id="addNewColumnLayout">
            <span
              style="font-size: 12px;width: 49px;height: 14px;margin-left: -26px;"
              (click)="onAddNewLayout($event)"
              >{{ 'SHARED.COLUMNOPTIONS.COLUMNNEW' | translate }}</span
            >
          </div>
        </div>
        <div
          class="row"
          style="padding-top: 10px;"
          *ngIf="viewModel.columnOptionsBound.isNew"
        >
          <div class="col-sm-9" style="font-size: 10px;">
            <input
              placeholder="name your new viewâ€¦"
              type="text"
              maxlength="100"
              [autofocus]="true"
              class="k-textbox form-control"
              id="editNewlayout"
              [ngModel]="viewModel.columnOptionsBound.layoutName"
              style="width:175px"
              [ngClass]="{ invalidTextBox: !viewModel.isLayoutNameValid }"
              (ngModelChange)="onLayoutNameChanged($event)"
              (focus)="onCDDetach()"
              (blur)="onCDReAttach()"
            />
          </div>
        </div>
        <div class="row public-view">
          <label class="fmp-checkbox">
            <input
              type="checkbox"
              [ngModel]="viewModel.columnOptionsBound.isPublic"
              (ngModelChange)="onPublicChecked($event)"
            />
            <span class="fmp-icons checkbox-icon"></span>
          </label>
          <label class="public-view-label">Make view public</label>
        </div>
        <hr
          style="border-width: 2px; width: 100%; padding: 0px; margin: 16px 0px 16px 0px;"
        />
      </div>
      <div
        id="bodyContent"
        [ngClass]="{
          BodyHeightNew: viewModel.columnOptionsBound.isNew,
          BodyHeightNotNew: !viewModel.columnOptionsBound.isNew
        }"
      >
        <div class="row">
          <div class="col-sm-12" style="font-size: 12px; color: #99A6B5;">
            <span style="font-size: 10px;width: 208px;height: 11px;">{{
              'SHARED.COLUMNOPTIONS.COLUMNACTIONS' | translate
            }}</span>
          </div>
        </div>
        <div class="row">
          <div
            class="col-sm-12"
            style="margin-top: 8px; margin-bottom: 16px;padding-right: 20px;"
          >
            <span style="font-size: 10px;width: 208px;height: 48px;">
              {{ 'SHARED.COLUMNOPTIONS.MESSAGE' | translate }}
            </span>
          </div>
        </div>
        <div
          class="row columnSortTemplate"
          style="font-size: 12px;color: #99A6B5; vertical-align: text-bottom;background-color: #F1F4F9 !important;"
        >
          <div class="col-sm-1 dragIcon"></div>
          <div
            class="col-sm-9 columnControl"
            style="font-size: 10px;width: 40px;height: 10px;"
          >
            {{ 'SHARED.COLUMNOPTIONS.COLUMNS' | translate }}
          </div>
          <div
            class="col-sm-2 lockIcon"
            style="font-size: 10px;width: 22px;height: 11px;"
          >
            {{ 'SHARED.COLUMNOPTIONS.COLUMNLOCK' | translate }}
          </div>
        </div>
        <kendo-sortable
          [data]="viewModel.columnOptionsBound.layoutConfigs"
          id="sortable"
          animation="true"
          [disabledIndexes]="viewModel.columnOptionsBound.DisabledIndexes"
          (dragStart)="onCDDetach()"
          (dragEnd)="onDragEnd($event)"
        >
          <ng-template let-item="item" let-i="index">
            <div
              class="row columnSortTemplate"
              style="font-size: 12px;width: 230px;height: 32px;"
            >
              <div class="col-sm-1 dragIcon">
                <span class="dls-icon dls-iconDrag"></span>
                <span class="dls-icon dls-iconDrag"></span>
              </div>
              <div
                style="font-size: 12px;width: 160px;height: 24px;"
                class="col-sm-9 columnControl"
                *ngIf="item.isDefault"
              >
                <input
                  type="text"
                  class="k-textbox form-control defaultTextbox"
                  style="width:160px;"
                  value="{{ item.columnName }}"
                  disabled="disabled"
                />
              </div>
              <div
                style="font-size: 12px;width: 160px;height: 24px;"
                class="col-sm-9 columnControl"
                *ngIf="!item.isDefault"
              >
                <kendo-combobox
                  id="combo_{{ i }}"
                  [data]="item.DropDownSource"
                  [textField]="'columnName'"
                  [valueField]="'fieldName'"
                  [(ngModel)]="item.selectedColumn"
                  style="width: 160px; height: 24px; font-size: 12px;"
                  (open)="onColumnsSelectionChange($event, item)"
                >
                </kendo-combobox>
              </div>
              <div
                class="col-sm-1 lockIcon"
                [ngSwitch]="item.selectedColumn.isLocked"
              >
                <span
                  *ngSwitchCase="true"
                  class="dls-icon dls-iconLocked"
                  (click)="onLockClick($event, item.selectedColumn, i)"
                  title="Lock Column"
                ></span>
                <span
                  *ngSwitchCase="false"
                  class="dls-icon dls-iconUnlocked"
                  (click)="onLockClick($event, item.selectedColumn, i)"
                  title="Unlock Column"
                ></span>
              </div>
              <div class="col-sm-1 infoIcon" [ngSwitch]="item.isDefault">
                <span
                  *ngSwitchCase="true"
                  class="dls-icon dls-iconInformation"
                  title="This column cannot be removed."
                ></span>
                <span
                  *ngSwitchCase="false"
                  class="dls-icon dls-iconClose"
                  (click)="onColumnDelete($event, item)"
                  title="Are you sure you want to remove this column?"
                ></span>
              </div>
            </div>
          </ng-template>
        </kendo-sortable>
      </div>
      <div id="footerContent" class="fixed-bottom" style="position: inherit;">
        <hr
          style="border-width: 2px; width: 100%; padding: 0px; margin: 0px 0px 16px 0px;"
        />
        <div
          class="row"
          style="margin-bottom: 9px;"
          (click)="onColumnAdd($event)"
        >
          <div class="col-sm-1">
            <span class="dls-icon dls-iconPlus" style="cursor:pointer;"></span>
            <!-- <img alt="Add" width="15" src="../../assets/images/1_Plus.png" id="addColumn" style=""> -->
          </div>
          <div class="col-sm-8">
            <span class="addNewColumn">{{
              'SHARED.COLUMNOPTIONS.COLUMNADD' | translate
            }}</span>
          </div>
        </div>
        <div class="row" style="margin-right:12px;">
          <div class="col-sm-3"></div>
          <div class="col-sm-4" style="margin-right: 10px;">
            <button
              style="width: 80px;"
              class="fmp-button fmp-button-secondary"
              (click)="closeColumnOptions()"
            >
              {{ 'COMMON.CANCEL' | translate }}
            </button>
          </div>
          <div class="col-sm-4">
            <button
              class="fmp-button fmp-button-primary"
              style="width: 80px;"
              [disabled]="!viewModel.isSavingEnabled"
              (click)="onSaveLayout()"
            >
              {{ 'COMMON.SAVE' | translate }}
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
